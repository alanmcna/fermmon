# Nginx server block for fermmon (Raspberry Pi)
# Copy to /etc/nginx/sites-available/fermmon and symlink to sites-enabled
#
# Then: sudo nginx -t && sudo systemctl reload nginx

server {
    listen 80;
    server_name fermmon.local;
    root /home/ubuntu/fermmon/web/public;

    index index.php;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ \.php$ {
        fastcgi_pass unix:/run/php/php-fpm.sock;  # or 127.0.0.1:9000
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }

    location ~ /\. {
        deny all;
    }
}
